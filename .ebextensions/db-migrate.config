container_commands:
  01_migrate:
    command: "python manage.py migrate"
    leader_only: true

  02_createsuperuser:
    command: >
      echo "from accounts.models import Account;
      Account.objects.create_superuser(email='admin@example.com', username='admin', password='securepassword')" |
      python manage.py shell || echo 'Superuser creation failed'

option_settings:
  aws:elasticbeanstalk:application:environment:
    DJANGO_SETTINGS_MODULE: "billy_online_store.settings"
